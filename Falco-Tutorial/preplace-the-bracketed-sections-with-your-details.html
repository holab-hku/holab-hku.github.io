<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 4 preplace the bracketed sections with your details | Falco Tutorial</title>
  <meta name="description" content="Falco: Single cell RNA-seq parrallelised cloud computing tutorial" />
  <meta name="generator" content="bookdown 0.16 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 4 preplace the bracketed sections with your details | Falco Tutorial" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Falco: Single cell RNA-seq parrallelised cloud computing tutorial" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 4 preplace the bracketed sections with your details | Falco Tutorial" />
  
  <meta name="twitter:description" content="Falco: Single cell RNA-seq parrallelised cloud computing tutorial" />
  

<meta name="author" content="Ho Lab" />


<meta name="date" content="2019-12-11" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="reference-genome.html"/>
<link rel="next" href="issue-this-command-from-the-falco-home-directory.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />












<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Minimal Book Example</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> About the Workshop</a></li>
<li class="chapter" data-level="2" data-path="getting-started.html"><a href="getting-started.html"><i class="fa fa-check"></i><b>2</b> Getting Started</a><ul>
<li class="chapter" data-level="2.1" data-path="getting-started.html"><a href="getting-started.html#prerequisites"><i class="fa fa-check"></i><b>2.1</b> Prerequisites</a></li>
<li class="chapter" data-level="2.2" data-path="getting-started.html"><a href="getting-started.html#aws-setup"><i class="fa fa-check"></i><b>2.2</b> AWS setup</a><ul>
<li class="chapter" data-level="2.2.1" data-path="getting-started.html"><a href="getting-started.html#aws-account"><i class="fa fa-check"></i><b>2.2.1</b> AWS account</a></li>
<li class="chapter" data-level="2.2.2" data-path="getting-started.html"><a href="getting-started.html#obtain-an-aws-secret-key"><i class="fa fa-check"></i><b>2.2.2</b> Obtain an AWS secret key</a></li>
<li class="chapter" data-level="2.2.3" data-path="getting-started.html"><a href="getting-started.html#install-the-aws-linux-client-aws-cli"><i class="fa fa-check"></i><b>2.2.3</b> Install the AWS Linux Client (AWS CLI)</a></li>
<li class="chapter" data-level="2.2.4" data-path="getting-started.html"><a href="getting-started.html#configuring-aws-linux-client"><i class="fa fa-check"></i><b>2.2.4</b> Configuring AWS Linux Client</a></li>
<li class="chapter" data-level="2.2.5" data-path="getting-started.html"><a href="getting-started.html#obtain-an-aws-ec2-key"><i class="fa fa-check"></i><b>2.2.5</b> Obtain an AWS EC2 key</a></li>
<li class="chapter" data-level="2.2.6" data-path="getting-started.html"><a href="getting-started.html#obtain-access-to-or-create-an-aws-s3-bucket"><i class="fa fa-check"></i><b>2.2.6</b> Obtain access to or create an AWS S3 bucket</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="reference-genome.html"><a href="reference-genome.html"><i class="fa fa-check"></i><b>3</b> Reference Genome</a><ul>
<li class="chapter" data-level="3.1" data-path="reference-genome.html"><a href="reference-genome.html#get-reference-genome-and-the-star-index"><i class="fa fa-check"></i><b>3.1</b> Get reference Genome and the STAR index</a></li>
<li class="chapter" data-level="3.2" data-path="reference-genome.html"><a href="reference-genome.html#sync-the-reference-genome-index-from-s3-bucket"><i class="fa fa-check"></i><b>3.2</b> Sync the reference genome index from s3 bucket</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="preplace-the-bracketed-sections-with-your-details.html"><a href="preplace-the-bracketed-sections-with-your-details.html"><i class="fa fa-check"></i><b>4</b> preplace the bracketed sections with your details</a></li>
<li class="chapter" data-level="5" data-path="issue-this-command-from-the-falco-home-directory.html"><a href="issue-this-command-from-the-falco-home-directory.html"><i class="fa fa-check"></i><b>5</b> issue this command from the Falco home directory</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Falco Tutorial</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="preplace-the-bracketed-sections-with-your-details" class="section level1">
<h1><span class="header-section-number">Chapter 4</span> preplace the bracketed sections with your details</h1>
<p>sed -i.bak ‚Äòs/username/[YOUR USER NAME]/g ; s/yourbucket/[YOUR BUCKET NAME]/g‚Äô tutorial/<em>.config
# EXAMPLE ONLY: if your user name if ‚Äúfred‚Äù and your AWS bucket is ‚Äúfalco-test‚Äù, then you would use the following command
#sed -i.bak ‚Äòs/username/fred/g ; s/yourbucket/falco-test/g‚Äô tutorial/</em>.config</p>
<pre><code>
[‚ÅâÔ∏è] Additionally, if your AWS S3 region is not *us-west-2*, issue the following command:
</code></pre>
<p>sed -i.bak.reg ‚Äòs/us-west-2/[YOUR REGION]/g‚Äô tutorial/<em>.config
# change [YOUR REGION] to the name of your region
# EXAMPLE (if your region is us-west-1): sed -i.bak.reg ‚Äòs/us-west-2/us-west-1/g‚Äô tutorial/</em>.config</p>
<pre><code>
The original .config files in the tutorial directory will now have the file extension .config.bak should you wish to restore the original files.

## Launch the AWS EMR cluster

[‚ùóÔ∏è] First open the file` tutorial/emr_cluster.confi`g and check that the `[EMR_nodes]` section is similar to the following:
</code></pre>
<p>[EMR_nodes]
key_name = yourkey
service_role = EMR_DefaultRole
instance_profile = EMR_EC2_DefaultRole
master_instance_type = r3.4xlarge
master_instance_count = 1
core_instance_type = r3.4xlarge
core_instance_count = 2
core_instance_spot = True
core_instance_bid_price = 1</p>
<pre><code>
The `[EMR_nodes]` section contains a line that starts with `key_name =`. The computing resources created by the AWS EMR framework uses public‚Äìkey cryptography to encrypt and decrypt login information. You need to supply your key name here. For example, if your encryption key file is `my-key-name.pem`, the corresponding line in the configuration file should read `key_name = my-key-name`. [‚ùóÔ∏è]Go ahead and edit this entry - enter your key name.[üî¥][ Also be aware of the charges that you may incur from AWS for the creation of this cluster. The master instance will be an on-demand type, whilst the two core instances are spot instance types. It is estimated the cost of the cluster for this tutorial, if terminated within 1 hour, will be less than $5 USD. This cost is based on the AWS region us-west-2 - US West (Oregon).

When ready, in the home directory of the *Falco* code, issue the following command to start the cluster: [‚ùóÔ∏è]
</code></pre>
<p>python3 launch_cluster.py ‚Äìconfig tutorial/emr_cluster.config</p>
<pre><code>
When the command is processed, the user will receive a response, of the form:
</code></pre>
<p>Cluster has been launched with ID j-1FDPU9CHN79W9</p>
<pre><code>
Make a note of your cluster ID for future reference.

## Monitor the EMR Cluster

[‚ùóÔ∏è] Monitor the status of the EMR cluster via the AWS EMR console. When the status of your cluster is Ready, you may proceed with the steps required for completing the analysis.

Click on your cluster to obtain more information about your cluster.

[üî¥] Since the nodes that are launched as part of this cluster use AWS spot instance types, it is possible that the market price for the instances exceeds the bid price. If this is the case, then the cluster will not start until the market price falls below the bid price. You can monitor the market price for the spot instances via the AWS EC2 Mangement Console. You can decide if you want to terminate your EMR cluster and either try again later, or modify the bid price in the file `tutorial/emr_cluster.config`.

## Upload the Manifest file

Falco requires a manifest file to list the FASTQ filenames representing the data input. The required format is a tab delimited text file. This file has been provided for this tutorial and is located at `tutorial/data.manifest`. Upload the manifest file to your AWS S3 bucket: [‚ùóÔ∏è]
</code></pre>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="reference-genome.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="issue-this-command-from-the-falco-home-directory.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["Falco-tutorial.pdf", "Falco-tutorial.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
